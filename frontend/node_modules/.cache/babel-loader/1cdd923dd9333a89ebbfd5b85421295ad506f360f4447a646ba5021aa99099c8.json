{"ast":null,"code":"var _jsxFileName = \"A:\\\\MockRw59\\\\frontend\\\\src\\\\context\\\\AuthContext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useEffect, useReducer } from \"react\";\n\n// Khởi tạo trạng thái ban đầu\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initial_state = {\n  username: null,\n  userId: null,\n  role: null,\n  userAgent: null,\n  token: null,\n  loading: false,\n  error: null\n};\n\n// Tạo context và reducer\nexport const AuthContext = /*#__PURE__*/createContext(initial_state);\nconst AuthReducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGIN_START\":\n      return {\n        ...state,\n        loading: true\n      };\n    case \"LOGIN_SUCCESS\":\n      return {\n        ...state,\n        username: action.payload.username,\n        userId: action.payload.userId,\n        role: action.payload.role,\n        userAgent: action.payload.userAgent,\n        token: action.payload.token,\n        loading: false,\n        error: null\n      };\n    case \"LOGIN_FAILURE\":\n      return {\n        ...state,\n        loading: false,\n        error: action.payload\n      };\n    case \"LOGOUT\":\n      return {\n        ...state,\n        username: null,\n        userId: null,\n        role: null,\n        userAgent: null,\n        token: null,\n        loading: false,\n        error: null\n      };\n    default:\n      return state;\n  }\n};\n_c = AuthReducer;\nexport const AuthContextProvider = ({\n  children\n}) => {\n  _s();\n  // Kiểm tra xem có dữ liệu trong localStorage hay không\n  const storedUsername = isValidJsonString(localStorage.getItem(\"username\")) ? JSON.parse(localStorage.getItem(\"username\")) : null;\n  const storedUserId = isValidJsonString(localStorage.getItem(\"userId\")) ? JSON.parse(localStorage.getItem(\"userId\")) : null;\n  const storedRole = isValidJsonString(localStorage.getItem(\"role\")) ? JSON.parse(localStorage.getItem(\"role\")) : null;\n  const storedUserAgent = isValidJsonString(localStorage.getItem(\"userAgent\")) ? JSON.parse(localStorage.getItem(\"userAgent\")) : null;\n  const storedToken = isValidJsonString(localStorage.getItem(\"token\")) ? JSON.parse(localStorage.getItem(\"token\")) : null;\n  const [state, dispatch] = useReducer(AuthReducer, {\n    ...initial_state,\n    username: storedUsername,\n    userId: storedUserId,\n    role: storedRole,\n    userAgent: storedUserAgent,\n    token: storedToken\n  });\n  useEffect(() => {\n    localStorage.setItem(\"username\", JSON.stringify(state.username));\n    localStorage.setItem(\"userId\", JSON.stringify(state.userId));\n    localStorage.setItem(\"role\", JSON.stringify(state.role));\n    localStorage.setItem(\"userAgent\", JSON.stringify(state.userAgent));\n    localStorage.setItem(\"token\", JSON.stringify(state.token));\n  }, [state.username, state.userId, state.role, state.userAgent, state.token]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      username: state.username,\n      userId: state.userId,\n      role: state.role,\n      userAgent: state.userAgent,\n      token: state.token,\n      loading: state.loading,\n      error: state.error,\n      dispatch\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n\n// Hàm kiểm tra định dạng JSON hợp lệ\n_s(AuthContextProvider, \"ArIFdi8bQucUUQ5sL1w5ZQBbOTQ=\");\n_c2 = AuthContextProvider;\nconst isValidJsonString = str => {\n  try {\n    JSON.parse(str);\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\nvar _c, _c2;\n$RefreshReg$(_c, \"AuthReducer\");\n$RefreshReg$(_c2, \"AuthContextProvider\");","map":{"version":3,"names":["createContext","useEffect","useReducer","jsxDEV","_jsxDEV","initial_state","username","userId","role","userAgent","token","loading","error","AuthContext","AuthReducer","state","action","type","payload","_c","AuthContextProvider","children","_s","storedUsername","isValidJsonString","localStorage","getItem","JSON","parse","storedUserId","storedRole","storedUserAgent","storedToken","dispatch","setItem","stringify","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c2","str","e","$RefreshReg$"],"sources":["A:/MockRw59/frontend/src/context/AuthContext.js"],"sourcesContent":["import { createContext, useEffect, useReducer } from \"react\";\n\n// Khởi tạo trạng thái ban đầu\nconst initial_state = {\n  username: null,\n  userId: null,\n  role: null,\n  userAgent: null,\n  token: null,\n  loading: false,\n  error: null,\n};\n\n// Tạo context và reducer\nexport const AuthContext = createContext(initial_state);\n\nconst AuthReducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGIN_START\":\n      return {\n        ...state,\n        loading: true,\n      };\n    case \"LOGIN_SUCCESS\":\n      return {\n        ...state,\n        username: action.payload.username,\n        userId: action.payload.userId,\n        role: action.payload.role,\n        userAgent: action.payload.userAgent,\n        token: action.payload.token,\n        loading: false,\n        error: null,\n      };\n    case \"LOGIN_FAILURE\":\n      return {\n        ...state,\n        loading: false,\n        error: action.payload,\n      };\n    case \"LOGOUT\":\n      return {\n        ...state,\n        username: null,\n        userId: null,\n        role: null,\n        userAgent: null,\n        token: null,\n        loading: false,\n        error: null,\n      };\n    default:\n      return state;\n  }\n};\n\nexport const AuthContextProvider = ({ children }) => {\n  // Kiểm tra xem có dữ liệu trong localStorage hay không\n  const storedUsername = isValidJsonString(localStorage.getItem(\"username\")) ? JSON.parse(localStorage.getItem(\"username\")) : null;\n  const storedUserId = isValidJsonString(localStorage.getItem(\"userId\")) ? JSON.parse(localStorage.getItem(\"userId\")) : null;\n  const storedRole = isValidJsonString(localStorage.getItem(\"role\")) ? JSON.parse(localStorage.getItem(\"role\")) : null;\n  const storedUserAgent = isValidJsonString(localStorage.getItem(\"userAgent\")) ? JSON.parse(localStorage.getItem(\"userAgent\")) : null;\n  const storedToken = isValidJsonString(localStorage.getItem(\"token\")) ? JSON.parse(localStorage.getItem(\"token\")) : null;\n\n  const [state, dispatch] = useReducer(AuthReducer, {\n    ...initial_state,\n    username: storedUsername,\n    userId: storedUserId,\n    role: storedRole,\n    userAgent: storedUserAgent,\n    token: storedToken,\n  });\n\n  useEffect(() => {\n    localStorage.setItem(\"username\", JSON.stringify(state.username));\n    localStorage.setItem(\"userId\", JSON.stringify(state.userId));\n    localStorage.setItem(\"role\", JSON.stringify(state.role));\n    localStorage.setItem(\"userAgent\", JSON.stringify(state.userAgent));\n    localStorage.setItem(\"token\", JSON.stringify(state.token));\n  }, [state.username, state.userId, state.role, state.userAgent, state.token]);\n\n  return (\n    <AuthContext.Provider\n      value={{\n        username: state.username,\n        userId: state.userId,\n        role: state.role,\n        userAgent: state.userAgent,\n        token: state.token,\n        loading: state.loading,\n        error: state.error,\n        dispatch,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\n// Hàm kiểm tra định dạng JSON hợp lệ\nconst isValidJsonString = (str) => {\n  try {\n    JSON.parse(str);\n    return true;\n  } catch (e) {\n    return false;\n  }\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}